

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waiting List</title>
    <link rel="stylesheet"  type="text/css" href="styles/style.css"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;300;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div>
        <div class="background">
            <div class="logo">
                <img src="./Assets/images/white-logo.png" alt="logo">
            </div>
            <div class="content">
                <div class="header-text">
                    <h1> Endless <br/> Possiblities</h1>
                    <p class="subtext">Coming soon in Akure, Ondo State...</p>
                    <form action="./notify.html" method="POST">
                        <input type="text" placeholder="Enter Email Address" class="formField">
                        <span class="focus-border"></span>
                        <button type="submit" class="btn submitForm">
                             Join waiting list
                    </form>
                </div>
            </div> 
        </div>

        <div class="footer">
            <div class="footerLogo">
                <div class="right">
                    <img src="./Assets/images/Ondo-Logo.png" alt="Ondo-state-logo" class="ondo">
                    <img src="./Assets/images/Ammut.png" alt="real-estate-logo">
                </div>
                
                <div class="middle">
                <a href="#" class="social-items">
                    <img src="./Assets/images/in.png" alt="in-logo"> 
                </a>
                <a href="#" class="social-items">
                    <img src="./Assets/images/fb.png" alt="fb-logo"> 
                </a>
                <a href="#" class="social-items">
                <img src="./Assets/images/ig.png" alt="ig-logo"> 
                </a>
                <a href="#" class="social-items">
                    <img src="./Assets/images/x.png" alt="x-logo"> 
                </a>  
                </div>

                <div class="left">
                    <img src="./Assets/images/phone-nos.png" alt="contact">
                </div>
            </div>
        </div>
    </div>
</body>

 <script type="module">

    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-analytics.js";
    import { getStorage } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-storage.js";
    import { getFirestore,doc,setDoc, collection, updateDoc,writeBatch,arrayUnion} from "https://www.gstatic.com/firebasejs/10.1.0/firebase-firestore.js";
    

    // TODO: Add SDKs for Firebase products that you want to use
    const firebaseConfig = {
      apiKey: "AIzaSyCV1Y8nNm_dkMjYGeSVqrKb27e-ud2behc",
      authDomain: "waitlist-data-4c143.firebaseapp.com",
      projectId: "waitlist-data-4c143",
      storageBucket: "waitlist-data-4c143.appspot.com",
      messagingSenderId: "971607464345",
      appId: "1:971607464345:web:17f530de72248b8da69b08",
      measurementId: "G-10PZMLXBDC"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const coal = getStorage(app);

    const db = getFirestore();

    const emailAddress = document.querySelector('.formField');
    const submit = document.querySelector('.submitForm');

    submit.addEventListener("click",(e)=>{
     e.preventDefault(); 
     

     const contact = collection(db,'contact');

    const userDetails2 = doc(db, 'contact', 'Ondo-state');
    setDoc(userDetails2, {email: arrayUnion(emailAddress.value)}, { merge: true })
    .then(()=>{ 
            console.log("this is written to db")
            window.location.assign("./notify.html");
            // emailAddress.value = "";
            // console.log('resest email input')
        }).catch((error) =>{
            console.log(`i got an error ${error}`)
        })

    // console.log(userDetails2);
    })
  </script>

</html>
